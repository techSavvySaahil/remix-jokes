import{a as W}from"/build/_shared/chunk-PGOH7JLP.js";import{a as $}from"/build/_shared/chunk-QVTEGN3F.js";import{a as M,d as R,h as T,i as A,k as p,o as S,s as a}from"/build/_shared/chunk-SLYZFWTH.js";import{c as r}from"/build/_shared/chunk-Q3IECNXJ.js";var q=r(W());var C="/build/_assets/jokes-W273M42Z.css";var P=r($());var s=r(a()),B=({userData:i})=>(0,s.jsx)("header",{className:"jokes-header",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{className:"home-link",children:(0,s.jsxs)(p,{to:"/",title:"Remix Jokes","aria-label":"Remix Jokes",children:[(0,s.jsx)("span",{className:"logo",children:"\u{1F92A}"}),(0,s.jsx)("span",{className:"logo-medium",children:"J\u{1F92A}KES"})]})}),i?(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsx)("span",{children:`Hi ${i.username}`}),(0,s.jsx)(A,{action:"/logout",method:"post",children:(0,s.jsx)("button",{type:"submit",className:"button",children:"Logout"})})]}):(0,s.jsx)(p,{to:"/login",children:"Login"})]})}),F=B;var y=r(a()),Q=()=>(0,y.jsx)("footer",{className:"jokes-footer",children:(0,y.jsx)("div",{className:"container",children:(0,y.jsx)(p,{reloadDocument:!0,to:"/jokes.rss",children:"RSS"})})}),H=Q;var m=r(M());var g=r(a()),X=({jokes:i,active:n,changeJoke:c})=>(0,g.jsx)("ul",{className:"jokes-list",children:i.length>0?i.map(({id:f,name:u})=>(0,g.jsx)("li",{children:(0,g.jsx)(p,{className:n===f?"active-joke":"",prefetch:"intent",to:f,onClick:()=>{c(f)},children:u})},f)):(0,g.jsx)("li",{children:"No jokes found"})}),O=X;var t=r(a());var Z=({data:i})=>{var J,E;let{user:n,allUsersData:c,jokeListItems:f}=i,[u,b]=(0,m.useState)(f),[L,x]=(0,m.useState)((J=f[0])==null?void 0:J.id),v=R(),k=(0,m.useRef)(null),K=(e,o)=>{switch(o.type){case"KEYWORD_CHANGED":return{...e,keyword:o.value};case"USER_UPDATED":return k&&k.current&&(k.current.value=""),{...e,user:o.value,keyword:""}}},Y={user:n.id,keyword:""},[w,N]=(0,m.useReducer)(K,Y),z=e=>{let{value:o=""}=e.target;N({type:"USER_UPDATED",value:o})},G=()=>{var e;N({type:"KEYWORD_CHANGED",value:(e=k.current)==null?void 0:e.value})};(0,m.useEffect)(()=>{var D;let{user:e,keyword:o}=w,d=[];e!=="all"?d=c[e].jokes:Object.values(c).forEach(j=>{d.push(...j.jokes)}),o!==""&&(d=d.filter(j=>!!j.name.toLowerCase().includes(o.toLowerCase()))),b(d);let h=(D=d[0])==null?void 0:D.id;x(h),v(h?`${h}`:"/jokes")},[w,c]);let U=()=>{if(u.length<2)return;let e=Math.round(Math.random()*(u.length-1)),o=u[e].id;o===L?U():(x(o),v(`${o}`))};return(0,t.jsxs)("div",{className:"left-panel",children:[(0,t.jsxs)("label",{children:["Select a user to see their jokes:",(0,t.jsxs)("select",{className:"user-dropdown",name:"selectedUser",defaultValue:n==null?void 0:n.id,onChange:z,children:[(0,t.jsx)("option",{value:"all",children:"All"},"all"),(E=Object.keys(c))==null?void 0:E.map(e=>{let{id:o,username:d}=c[e],h=o===n.id?`(You) ${d}`:d;return(0,t.jsx)("option",{value:o,children:h},o)})]})]}),(0,t.jsx)("input",{type:"text",ref:k,placeholder:"Search a joke",onChange:G}),(0,t.jsx)("p",{children:"Click on a joke to read it:"}),(0,t.jsx)(O,{jokes:u,active:L,changeJoke:e=>{x(e)}}),(0,t.jsx)("button",{className:"button",onClick:U,children:"See a random joke"}),(0,t.jsx)("p",{children:(0,t.jsx)("b",{children:"(OR)"})}),(0,t.jsx)(p,{to:"new",className:"button",children:"Add your own"})]})},I=Z;var l=r(a()),ee=()=>[{rel:"stylesheet",href:C}];function _(){var n;let i=S();return(0,l.jsxs)("div",{className:"jokes-layout",children:[(0,l.jsx)(F,{userData:i.user}),(0,l.jsx)("main",{className:"jokes-main",children:(0,l.jsxs)("div",{className:"container",children:[((n=i.user)==null?void 0:n.id)&&(0,l.jsx)(I,{data:i}),(0,l.jsx)("div",{className:"jokes-outlet",children:(0,l.jsx)(T,{})})]})}),(0,l.jsx)(H,{})]})}export{_ as default,ee as links};
