import{c,d as h,j as r,F as j,b as x,i as p,L as v}from"./components-flXA8FWO.js";import{J as g}from"./joke-Czsrqcbc.js";function E(e){if(e.length<10)return"That joke is too short"}function k(e){if(e.length<3)return"That joke's name is too short"}function y(){var t,i,l,d,a,m,u,f;const e=c(),o=h();if(o.formData){const n=o.formData.get("content"),s=o.formData.get("name");if(typeof n=="string"&&typeof s=="string"&&!E(n)&&!k(s))return r.jsx(g,{canDelete:!1,isOwner:!0,joke:{name:s,content:n}})}return r.jsxs("div",{children:[r.jsx("p",{children:"Add your own hilarious joke"}),r.jsxs(j,{method:"post",children:[r.jsxs("div",{children:[r.jsxs("label",{children:["Name:"," ",r.jsx("input",{defaultValue:(t=e==null?void 0:e.fields)==null?void 0:t.name,name:"name",type:"text","aria-invalid":!!((i=e==null?void 0:e.fieldErrors)!=null&&i.name),"aria-errormessage":(l=e==null?void 0:e.fieldErrors)!=null&&l.name?"name-error":void 0})]}),(d=e==null?void 0:e.fieldErrors)!=null&&d.name?r.jsx("p",{className:"form-validation-error",id:"name-error",role:"alert",children:e.fieldErrors.name}):null]}),r.jsxs("div",{children:[r.jsxs("label",{children:["Content:"," ",r.jsx("textarea",{defaultValue:(a=e==null?void 0:e.fields)==null?void 0:a.content,name:"content","aria-invalid":!!((m=e==null?void 0:e.fieldErrors)!=null&&m.content),"aria-errormessage":(u=e==null?void 0:e.fieldErrors)!=null&&u.content?"content-error":void 0})]}),(f=e==null?void 0:e.fieldErrors)!=null&&f.content?r.jsx("p",{className:"form-validation-error",id:"content-error",role:"alert",children:e.fieldErrors.content}):null]}),r.jsxs("div",{children:[e!=null&&e.formError?r.jsx("p",{className:"form-validation-error",role:"alert",children:e.formError}):null,r.jsx("button",{type:"submit",className:"button",children:"Add"})]})]})]})}function w(){const e=x();return console.error(e),p(e)&&e.status===401?r.jsxs("div",{className:"error-container",children:[r.jsx("p",{children:"You must be logged in to create a joke."}),r.jsx(v,{to:"/login",children:"Login"})]}):r.jsx("div",{className:"error-container",children:"Something unexpected went wrong. Sorry about that."})}export{w as ErrorBoundary,y as default};
